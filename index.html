<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inaccurate Calculator üòà</title>
  <style>
    :root {
      --bg: #0f172a;           /* slate-900 */
      --panel: #111827;        /* gray-900 */
      --display-bg: #0b1220;   /* deep slate */
      --text: #e5e7eb;         /* gray-200 */
      --muted: #94a3b8;        /* slate-400 */
      --accent: #22c55e;       /* green-500 */
      --danger: #ef4444;       /* red-500 */
      --op: #2563eb;           /* blue-600 */
      --btn: #1f2937;          /* gray-800 */
      --btn-hover: #293548;    /* hover */
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100vh; display: grid; place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% 10%, #0b1220, #0a0f1a 40%, var(--bg));
      color: var(--text);
    }
    .calc {
      width: min(92vw, 440px);
      background: linear-gradient(180deg, #0f172a, #0b1220 50%, #0a0f1a);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      border: 1px solid rgba(255,255,255,.06);
    }
    .header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 14px 18px; background: #0b1220; border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .title { font-weight: 600; letter-spacing: .3px; }
    .badge {
      font-size: 12px; color: #fbbf24; background: rgba(251,191,36,.12);
      padding: 4px 8px; border-radius: 999px; border: 1px solid rgba(251,191,36,.25);
    }
    .display {
      background: var(--display-bg);
      padding: 22px 18px;
      text-align: right;
      font-variant-numeric: tabular-nums;
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .expr { color: var(--muted); font-size: 14px; min-height: 18px; }
    .value { font-size: 42px; font-weight: 700; margin-top: 6px; word-break: break-all; }
    .grid {
      display: grid; gap: 10px; padding: 14px; background: var(--panel);
      grid-template-columns: repeat(4, 1fr);
    }
    button {
      border: 0; padding: 16px; border-radius: 14px; font-size: 18px; font-weight: 600;
      color: var(--text); background: var(--btn); cursor: pointer; transition: transform .05s ease, background .15s ease, filter .2s ease;
      box-shadow: inset 0 -2px 0 rgba(255,255,255,.04), 0 6px 16px rgba(0,0,0,.25);
      user-select: none;
    }
    button:hover { background: var(--btn-hover); filter: brightness(1.03); }
    button:active { transform: translateY(1px); }
    .op { background: #0f2147; }
    .op:hover { background: #12305f; }
    .accent { background: #12381e; }
    .accent:hover { background: #134424; }
    .danger { background: #3b0d0d; }
    .danger:hover { background: #541414; }
    .span-2 { grid-column: span 2; }
    .footer {
      padding: 10px 16px 18px; color: var(--muted); font-size: 12px; text-align: center;
      background: var(--panel);
    }
    .footnote { opacity: .9 }
    .blink { animation: blink 1.2s infinite; }
    @keyframes blink { 50% { opacity: .55 } }
    kbd {
      background: #0b1220; border: 1px solid rgba(255,255,255,.12); border-bottom-color: rgba(255,255,255,.18);
      border-radius: 6px; padding: 2px 6px; font-size: 11px; color: #cbd5e1;
    }
  </style>
</head>
<body>
  <div class="calc" role="application" aria-label="Inaccurate Calculator">
    <div class="header">
      <div class="title">Inaccurate Calculator</div>
      <div class="badge" title="This calculator intentionally skews results.">‚ö†Ô∏è Wrong on purpose</div>
    </div>

    <div class="display" aria-live="polite" aria-atomic="true">
      <div id="expr" class="expr"></div>
      <div id="value" class="value">0</div>
    </div>

    <div class="grid">
      <button class="danger" data-action="clear" aria-label="Clear (C)">C</button>
      <button class="danger" data-action="del" aria-label="Delete (Backspace)">DEL</button>
      <button class="op" data-op="%" aria-label="Percent">%</button>
      <button class="op" data-op="/" aria-label="Divide">√∑</button>

      <button data-num="7">7</button>
      <button data-num="8">8</button>
      <button data-num="9">9</button>
      <button class="op" data-op="*" aria-label="Multiply">√ó</button>

      <button data-num="4">4</button>
      <button data-num="5">5</button>
      <button data-num="6">6</button>
      <button class="op" data-op="-" aria-label="Subtract">‚àí</button>

      <button data-num="1">1</button>
      <button data-num="2">2</button>
      <button data-num="3">3</button>
      <button class="op" data-op="+" aria-label="Add">+</button>

      <button class="span-2" data-num="0">0</button>
      <button data-num="." aria-label="Decimal">.</button>
      <button class="accent" data-action="equals" aria-label="Equals">=</button>
    </div>

    <div class="footer">
      <span class="footnote">Heads-up: results are deliberately biased (for fun, demos, or testing). Keyboard: <kbd>0‚Äì9</kbd> <kbd>.</kbd> <kbd>+ ‚àí √ó √∑</kbd> <kbd>Enter</kbd> <kbd>Backspace</kbd> <kbd>Esc</kbd>.</span>
    </div>
  </div>

  <script>
    const exprEl = document.getElementById('expr');
    const valueEl = document.getElementById('value');

    const state = {
      display: '0',
      first: null,
      op: null,
      waiting: false
    };

    function updateDisplay() {
      valueEl.textContent = state.display;
      const up = (state.first !== null && state.op)
        ? `${trimTrailing(state.first)} ${symbol(state.op)}`
        : '';
      exprEl.textContent = up;
    }

    function inputNumber(d) {
      if (state.waiting) {
        state.display = (d === '.') ? '0.' : d;
        state.waiting = false;
      } else {
        if (d === '.' && state.display.includes('.')) return;
        state.display = (state.display === '0' && d !== '.') ? d : state.display + d;
      }
      updateDisplay();
    }

    function setOperator(op) {
      const current = parseFloat(state.display);
      if (state.first === null) {
        state.first = current;
      } else if (!state.waiting) {
        const r = compute(state.first, current, state.op);
        state.first = r;
        state.display = format(r);
      }
      state.op = op;
      state.waiting = true;
      updateDisplay();
    }

    function clearAll() {
      state.display = '0'; state.first = null; state.op = null; state.waiting = false;
      updateDisplay();
    }

    function delOne() {
      if (state.waiting) return; // don't delete when waiting for next number
      state.display = state.display.length > 1 ? state.display.slice(0, -1) : '0';
      updateDisplay();
    }

    function equals() {
      if (state.op === null || state.waiting) return;
      const second = parseFloat(state.display);
      const result = compute(state.first, second, state.op);
      state.display = format(result);
      state.first = null; state.op = null; state.waiting = false;
      updateDisplay();
      flashWrong();
    }

    function compute(a, b, op) {
      let raw;
      switch (op) {
        case '+': raw = a + b; break;
        case '-': raw = a - b; break;
        case '*': raw = a * b; break;
        case '/': raw = b === 0 ? NaN : a / b; break;
        case '%': raw = a % b; break;
        default: raw = b;
      }
      // --- HERE'S THE SECRET SAUCE: ALWAYS MAKE IT WRONG ---
      return wrongify(raw);
    }

    // Intentionally skew the result in a subtle, consistent way.
    function wrongify(n) {
      if (!Number.isFinite(n)) return n;
      const bias = 0.0073;         // 0.73% multiplicative bias
      let r = n * (1 + bias);
      r += (Math.abs(n) % 1 === 0 ? 0.3 : 0.13); // small offset so even 0 becomes 0.3
      return Number(r.toFixed(10)); // keep it looking precise üëÄ
    }

    // Helpers
    function format(n) {
      if (!Number.isFinite(n)) return 'Error';
      const s = n.toString();
      // Avoid super long strings but preserve decimals
      return Math.abs(n) > 1e12 || (Math.abs(n) < 1e-6 && n !== 0)
        ? n.toExponential(8)
        : trimTrailing(n.toFixed(10));
    }
    function trimTrailing(s) {
      // Accept a string or number
      s = String(s);
      return s.replace(/\.?0+$/,'');
    }
    function symbol(op) {
      return ({'/':'√∑','*':'√ó','+':'+','-':'‚àí','%':'%'}[op] || op);
    }
    function flashWrong() {
      valueEl.classList.add('blink');
      setTimeout(()=> valueEl.classList.remove('blink'), 900);
    }

    // Click handlers
    document.querySelectorAll('[data-num]').forEach(b => {
      b.addEventListener('click', () => inputNumber(b.dataset.num));
    });
    document.querySelectorAll('[data-op]').forEach(b => {
      b.addEventListener('click', () => setOperator(b.dataset.op));
    });
    document.querySelector('[data-action="clear"]').addEventListener('click', clearAll);
    document.querySelector('[data-action="del"]').addEventListener('click', delOne);
    document.querySelector('[data-action="equals"]').addEventListener('click', equals);

    // Keyboard support
    window.addEventListener('keydown', (e) => {
      const k = e.key;
      if (/\d/.test(k)) return inputNumber(k);
      if (k === '.') return inputNumber('.');
      if (['+','-','*','/','%'].includes(k)) return setOperator(k);
      if (k === 'Enter' || k === '=') return equals();
      if (k === 'Backspace') return delOne();
      if (k === 'Escape') return clearAll();
    });

    updateDisplay();
  </script>
</body>
</html>
